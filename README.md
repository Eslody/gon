# gon
仿写gin实现的golang框架。



在golang原生net/http库静态路由的基础上实现了动态路由，将原本req和resp的参数形式封装成context上下文。其中，路由采用前缀树进行拆分。

实现了静态资源服务机制。

实现了分组控制，支持前缀区分和分组嵌套。

实现了中间件机制，默认实现了日志中间件和错误处理中间件。中间件可作用于子分组。

实现了缓存中间件，对golang官方cache库作了一定程度优化。

在高并发、大数据量写入缓存、高缓存更新频率（2s）的条件下，使用ab压测工具对gon-cache进行多次并发量为1000、时间为一分钟的压测：

```shell
abs -t 60 -c 1000 127.0.0.1:8082/v1/hello
```

最终，gon-cache的qps稳定在1200~1400，如图：

![pic1](cache\src\1.png)

而用gin-cache进行相同的测试，结果令人惊讶：

![pic2](cache\src\2.png)

足足相差了三倍！

当然，这并不是正常条件下的结果，需要较多次的缓存更新写入以及高并发请求，但我们也可以从中取得一些缓存优化的思路。
